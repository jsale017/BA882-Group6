gcloud config set project finnhub-pipeline-ba882
gcloud functions deploy ML_Prediction_NN \
    --gen2 \
    --runtime python311 \
    --trigger-http \
    --entry-point read_csv_from_gcs_and_predict \
    --source /home/ethanch/Predictive-Financial-Analytics-APIs/ml_functions/ML_Prediction_NN \
    --stage-bucket gcf-v2-uploads-676257416424-us-central1 \
    --service-account machine-learning@finnhub-pipeline-ba882.iam.gserviceaccount.com \
    --region us-central1 \
    --allow-unauthenticated \
    --memory 2048MB

# Check Result
curl "https://us-central1-finnhub-pipeline-ba882.cloudfunctions.net/ML_Prediction_NN?file_name=cleaned_stock_data.csv"

# Check Error
gcloud functions logs read ML_Prediction_NN --region us-central1 --limit 50

